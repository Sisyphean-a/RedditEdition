# VS Code Stealth Reader (Reddit Edition)

è¿™æ˜¯ä¸€ä¸ªä¼ªè£…æˆæ—¥å¿—æŸ¥çœ‹å™¨çš„ Reddit é˜…è¯»æ‰©å±•ã€‚å®ƒå°† Reddit çš„å†…å®¹æ‹‰å–å¹¶è‡ªåŠ¨ç¿»è¯‘æˆä¸­æ–‡ï¼Œä»¥ `.log` æ–‡ä»¶å½¢å¼å±•ç¤ºï¼Œè®©ä½ åœ¨å·¥ä½œæ—¶â€œéšè”½â€åœ°æµè§ˆ Redditã€‚

## âœ¨ æ ¸å¿ƒç‰¹æ€§

- **éšè”½é˜…è¯»**ï¼šUI ä¼ªè£…æˆæ™®é€šæ—¥å¿—æ–‡ä»¶ï¼Œå®Œå…¨ç¦ç”¨ Webviewï¼Œå¤–è§‚ä¸æœåŠ¡å™¨æ—¥å¿—æ— å¼‚ã€‚
- **å…¨ä¸­æ–‡ä½“éªŒ**ï¼š
  - **AI ç¿»è¯‘ (æ¨è)**ï¼šé’ˆå¯¹ **DeepSeek** (æ–°!) å’Œ **OpenRouter (Qwen)** è¿›è¡Œäº†æ·±åº¦ä¼˜åŒ–ï¼Œç¿»è¯‘é£æ ¼å£è¯­åŒ–ã€‚
  - **ç”± Google ç¿»è¯‘æä¾›æ”¯æŒ**ï¼šå†…ç½®ç½‘é¡µç‰ˆ Google ç¿»è¯‘å¼•æ“ä½œä¸ºå¤‡é€‰æˆ–å¿«é€Ÿæµè§ˆæ–¹æ¡ˆã€‚
- **ä¾¿æ·ç®¡ç†**ï¼šæ–°å¢ **ä¾§è¾¹æ è´¦æˆ·è§†å›¾**ï¼Œä¸€é”®ç®¡ç†ç™»å½•çŠ¶æ€ã€ç¼“å­˜å’Œè®¾ç½®ã€‚
- **Token è¿½è¸ª**ï¼šå®æ—¶å±•ç¤ºæœ¬æ¬¡ä¼šè¯é¢„ä¼°çš„ Token æ¶ˆè€—é‡ã€‚
- **çµæ´»è®¤è¯**ï¼šæ”¯æŒ **åŒ¿åæ¨¡å¼ (Guest)** å’Œ **OAuth2 å®‰å…¨ç™»å½•**ã€‚
  - *æ³¨ï¼šå·²ç§»é™¤ä¸ç¨³å®šçš„ Cookie è®¤è¯æ–¹å¼ã€‚*
- **æ™ºèƒ½é˜²é£æ§**ï¼šå†…ç½®ä»¤ç‰Œæ¡¶é™æµå™¨å’Œæ™ºèƒ½ç¼“å­˜ç³»ç»Ÿï¼Œé™ä½ API å°ç¦é£é™©ã€‚
- **æ·±åº¦æµè§ˆ**ï¼šæ”¯æŒ Reddit åµŒå¥—è¯„è®ºçš„æ ‘çŠ¶å±•ç¤ºï¼Œæ¸…æ™°è¿˜åŸè®¨è®ºè„‰ç»œã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å‡†å¤‡å·¥ä½œ
è·å– API Keyï¼š
- [DeepSeek](https://platform.deepseek.com/) (æ¨è)
- [OpenRouter](https://openrouter.ai/) (é€‚åˆä½¿ç”¨ Qwen ç­‰æ¨¡å‹)

### 2. é…ç½®æ‰©å±•
æ‰“å¼€ VS Code è®¾ç½® (`Ctrl+,`)ï¼Œæœç´¢ `logViewer`ï¼š
*   **Log Viewer: Deepseek Api Key**: å¡«å…¥ä½ çš„ Key (ä½¿ç”¨ DeepSeek æ—¶å¿…å¡«)ã€‚
*   **Log Viewer: OpenRouter Api Key**: å¡«å…¥ä½ çš„ Key (ä½¿ç”¨ OpenRouter æ—¶å¿…å¡«)ã€‚
*   **Log Viewer: Translation Provider**: é€‰æ‹© `deepseek`, `openrouter` æˆ– `machine`ã€‚
*   **Log Viewer: Subreddits**: æ·»åŠ ä½ æƒ³çœ‹çš„ç‰ˆå—ï¼Œå¦‚ `programming`, `technology` (é»˜è®¤å·²é¢„è®¾)ã€‚

### 3. é€‰æ‹©è®¤è¯æ–¹å¼

ä¸ºäº†è·å¾—æœ€ä½³ä½“éªŒï¼ˆè®¿é—® NSFW å†…å®¹ã€æŸ¥çœ‹ä¸ªæ€§åŒ–è®¢é˜…ï¼‰ï¼Œæ¨èç™»å½•ã€‚

#### æ–¹å¼ A: åŒ¿å/æ¸¸å®¢æ¨¡å¼ (é»˜è®¤)
*   **ä¼˜ç‚¹**: æ— éœ€é…ç½®ï¼Œå³è£…å³ç”¨ã€‚
*   **ç¼ºç‚¹**: æ— æ³•æŸ¥çœ‹ NSFW å†…å®¹ï¼ŒAPI é€Ÿç‡é™åˆ¶è¾ƒä¸¥ã€‚
*   **æ“ä½œ**: é»˜è®¤å¼€å¯ã€‚å¯åœ¨ä¾§è¾¹æ â€œè´¦æˆ·ä¿¡æ¯â€ä¸­ä¸€é”®åˆ‡æ¢ã€‚

#### æ–¹å¼ B: OAuth2 ç™»å½• (æ¨è)
*   **ä¼˜ç‚¹**: å®‰å…¨ï¼Œé€Ÿç‡é™åˆ¶æ›´å®½æ¾ï¼Œæ”¯æŒä¸ªæ€§åŒ–é¦–é¡µã€‚
*   **æ“ä½œ**:
    1. å‰å¾€ [Reddit Apps](https://www.reddit.com/prefs/apps) åˆ›å»ºä¸€ä¸ªåº”ç”¨ã€‚
    2. ç±»å‹é€‰æ‹© **installed app**ã€‚
    3. `redirect uri` å¡«å†™ `http://localhost:54321/callback`ã€‚
    4. åˆ›å»ºåï¼Œå°†è·å¾—ä¸€ä¸ª **Client ID** (åº”ç”¨åç§°ä¸‹æ–¹çš„å­—ç¬¦ä¸²)ã€‚
    5. åœ¨ VS Code è®¾ç½®ä¸­å¡«å…¥ `Log Viewer > Auth: Client Id`ã€‚
    6. ç‚¹å‡»ä¾§è¾¹æ â€œè´¦æˆ·ä¿¡æ¯â€ä¸­çš„ **ç™»å½• (OAuth2)** æŒ‰é’®ï¼Œå¹¶åœ¨æµè§ˆå™¨ä¸­æˆæƒã€‚

## ğŸ–¥ï¸ ç•Œé¢æŒ‡å—

### ä¾§è¾¹æ ï¼šè´¦æˆ·ä¿¡æ¯ (Account Info)
æ–°çš„ä¾§è¾¹æ è§†å›¾ï¼Œæä¾›ä¾¿æ·çš„æ§åˆ¶é¢æ¿ï¼š
- **ç”¨æˆ·çŠ¶æ€**ï¼šæ˜¾ç¤ºå½“å‰æ˜¯ã€Œæ¸¸å®¢ã€è¿˜æ˜¯ã€Œå·²è®¤è¯ç”¨æˆ·ã€ã€‚
- **å¿«æ·æ“ä½œ**ï¼š
  - **ç™»å½•/ç™»å‡º**ï¼šä¸€é”®ç®¡ç† OAuth çŠ¶æ€ã€‚
  - **åŒ¿åæ¨¡å¼åˆ‡æ¢**ï¼šå¿«é€Ÿåˆ‡æ¢èº«ä»½ã€‚
  - **æ¸…é™¤ç¼“å­˜**ï¼šé‡åˆ°å†…å®¹é—®é¢˜æ—¶ï¼Œç‚¹æ­¤é‡ç½®ã€‚
  - **è®¾ç½®**ï¼šå¿«é€Ÿç›´è¾¾æ‰©å±•è®¾ç½®é¡µã€‚

## âš™ï¸ è¯¦ç»†é…ç½®

| é…ç½®é¡¹ | è¯´æ˜ | é»˜è®¤å€¼ |
| :--- | :--- | :--- |
| `logViewer.geminiApiKey` | Gemini API å¯†é’¥ | `""` |
| `logViewer.deepseekApiKey` | DeepSeek API å¯†é’¥ | `""` |
| `logViewer.subreddits` | è®¢é˜…åˆ—è¡¨ | `["programming"]` |
| `logViewer.translationProvider` | ç¿»è¯‘å¼•æ“: `machine`, `ai`, `deepseek` | `machine` |
| `logViewer.geminiModel` | Gemini æ¨¡å‹ç‰ˆæœ¬ | `gemini-2.5-flash-lite` |
| `logViewer.deepseekModel` | DeepSeek æ¨¡å‹ç‰ˆæœ¬ | `deepseek-chat` |
| `logViewer.auth.clientId` | OAuth2 Client ID (ç”¨äºç™»å½•) | `""` |
| `logViewer.auth.anonymous` | æ˜¯å¦å¼ºåˆ¶å¼€å¯åŒ¿åæ¨¡å¼ | `false` |
| `logViewer.cacheDuration` | å†…å®¹ç¼“å­˜æ—¶é•¿ï¼ˆåˆ†é’Ÿï¼‰ | `30` |
| `logViewer.wordWrapWidth` | ç¡¬æ¢è¡Œå®½åº¦ (å­—ç¬¦) | `80` |

## ğŸ› ï¸ å¸¸ç”¨å‘½ä»¤

æŒ‰ `F1` è¾“å…¥ `Log Viewer`ï¼š

- **åˆ·æ–°æ—¥å¿—** (`Refresh Logs`): åˆ·æ–°å½“å‰åˆ—è¡¨ã€‚
- **ç™»å½• (OAuth2)** (`Login`): å¯åŠ¨ OAuth2 æˆæƒæµç¨‹ã€‚
- **åˆ‡æ¢åŒ¿åæ¨¡å¼**: åœ¨ç™»å½•å’Œæ¸¸å®¢çŠ¶æ€é—´å¿«é€Ÿåˆ‡æ¢ã€‚
- **æ¸…é™¤ç¼“å­˜**: åˆ é™¤æ‰€æœ‰å·²ä¸‹è½½çš„ç¿»è¯‘ç¼“å­˜ã€‚
- **åˆ·æ–°è´¦æˆ·çŠ¶æ€**: æ‰‹åŠ¨åˆ·æ–°ä¾§è¾¹æ çŠ¶æ€ã€‚

## ğŸ“ å¸¸è§é—®é¢˜

**Q: ä¸ºä»€ä¹ˆç¿»è¯‘å¾ˆæ…¢ï¼Ÿ**
A: é¦–æ¬¡åŠ è½½å¸–å­éœ€è¦è°ƒç”¨ AI æˆ–ç¿»è¯‘æ¥å£ï¼Œé€šå¸¸éœ€è¦ 2-5 ç§’ã€‚å†…å®¹ä¼šè‡ªåŠ¨ç¼“å­˜ï¼Œå†æ¬¡æ‰“å¼€å³ç§’å¼€ã€‚

**Q: ç™»å½•åæ— æ³•å›è°ƒ (Localhost refused)ï¼Ÿ**
A: ç¡®ä¿ä½ çš„ Reddit App Redirect URI ä¸¥æ ¼è®¾ç½®ä¸º `http://localhost:54321/callback`ã€‚

**Q: å¦‚ä½•çœ‹ NSFW å†…å®¹ï¼Ÿ**
A: å¿…é¡»ä½¿ç”¨ **OAuth2 ç™»å½•**ï¼Œå¹¶ä¸”åœ¨ Reddit ç½‘é¡µç«¯è®¾ç½®ä¸­å¼€å¯ "I am over 18"ã€‚

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„ (2.0 é‡æ„ç‰ˆ)

æœ¬é¡¹ç›®éµå¾ª **Clean Architecture** åŸåˆ™è¿›è¡Œè®¾è®¡,ç›®å½•ç»“æ„æ¸…æ™°åˆ†å±‚:

### ç›®å½•ç»“æ„

```
src/
â”œâ”€â”€ extension.ts              # æ‰©å±•å…¥å£,è´Ÿè´£ä¾èµ–æ³¨å…¥å’Œç”Ÿå‘½å‘¨æœŸç®¡ç†
â”œâ”€â”€ domain/                   # é¢†åŸŸå±‚ (æ ¸å¿ƒä¸šåŠ¡é€»è¾‘,ä¸ä¾èµ–å¤–éƒ¨æ¡†æ¶)
â”‚   â”œâ”€â”€ models.ts            # æ•°æ®æ¨¡å‹ (RedditPost ç­‰)
â”‚   â””â”€â”€ interfaces.ts        # æ¥å£å®šä¹‰ (IRedditClient, ITranslationService)
â”œâ”€â”€ infrastructure/           # åŸºç¡€è®¾æ–½å±‚ (å¤–éƒ¨ä¾èµ–çš„å…·ä½“å®ç°)
â”‚   â”œâ”€â”€ reddit/              # Reddit API å®¢æˆ·ç«¯
â”‚   â”‚   â””â”€â”€ redditClient.ts  # å®ç° IRedditClient,æ”¯æŒ OAuth2/åŒ¿ååŒæ¨¡
â”‚   â”œâ”€â”€ translation/         # ç¿»è¯‘æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ translator.ts    # ç¿»è¯‘æœåŠ¡åè°ƒå™¨
â”‚   â”‚   â””â”€â”€ translationStrategies.ts  # ç­–ç•¥æ¨¡å¼å®ç° (Gemini/DeepSeek/Machine)
â”‚   â”œâ”€â”€ auth/                # è®¤è¯æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ oauthManager.ts  # OAuth2 è®¤è¯ç®¡ç†
â”‚   â”‚   â””â”€â”€ authServer.ts    # OAuth2 å›è°ƒæœåŠ¡å™¨
â”‚   â””â”€â”€ utils/               # å·¥å…·ç±»
â”‚       â”œâ”€â”€ cache.ts         # ç¼“å­˜ç®¡ç†
â”‚       â”œâ”€â”€ rateLimiter.ts   # ä»¤ç‰Œæ¡¶é™æµå™¨
â”‚       â”œâ”€â”€ config.ts        # é…ç½®è¯»å–
â”‚       â””â”€â”€ logger.ts        # æ—¥å¿—å·¥å…·
â””â”€â”€ presentation/             # è¡¨ç°å±‚ (UI ç›¸å…³)
    â”œâ”€â”€ logPresenter.ts      # æ—¥å¿—æ ¼å¼åŒ–ä¸æ¸²æŸ“
    â”œâ”€â”€ accountProvider.ts   # ä¾§è¾¹æ è´¦æˆ·è§†å›¾
    â”œâ”€â”€ treeProvider.ts      # æ ‘çŠ¶è§†å›¾æä¾›è€…
    â””â”€â”€ contentProvider.ts   # å†…å®¹æä¾›è€…
```

### æ¶æ„åˆ†å±‚

*   **Domain Layer (é¢†åŸŸå±‚)**: å®šä¹‰æ ¸å¿ƒä¸šåŠ¡å®ä½“ (`RedditPost`) å’Œæ¥å£ (`IRedditClient`, `ITranslationService`),ä¸ä¾èµ–ä»»ä½•å¤–éƒ¨æ¡†æ¶ã€‚
*   **Infrastructure Layer (åŸºç¡€è®¾æ–½å±‚)**: 
    *   `RedditClient`: å®ç° API è°ƒç”¨,æ”¯æŒ OAuth2/åŒ¿ååŒæ¨¡ã€‚
    *   `Translator`: é‡‡ç”¨**ç­–ç•¥æ¨¡å¼**,åŠ¨æ€åˆ‡æ¢ Gemini AIã€DeepSeek æˆ– Google ç¿»è¯‘å¼•æ“ã€‚
    *   `Auth`: OAuth2 è®¤è¯æµç¨‹ç®¡ç†ã€‚
    *   `Utils`: ç¼“å­˜ã€é™æµã€é…ç½®ã€æ—¥å¿—ç­‰å·¥å…·ã€‚
*   **Presentation Layer (è¡¨ç°å±‚)**: 
    *   `LogPresenter`: ä¸“æ³¨å¤„ç†æ—¥å¿—æ ¼å¼åŒ–ä¸æ¸²æŸ“ (View Logic)ã€‚
    *   `AccountProvider`: ç®¡ç†ä¾§è¾¹æ è´¦æˆ·è§†å›¾çŠ¶æ€ã€‚
    *   `TreeProvider` / `ContentProvider`: é€‚é… VS Code APIã€‚
